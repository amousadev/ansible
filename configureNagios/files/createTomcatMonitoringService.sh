#!/bin/bash
curl -XPOST "http://localhost/nagiosxi/api/v1/config/service?apikey=8FJgInbDd6L3QEKiobMHL8Upd4sO2NkpIjZGZaAcAhemcXYToKAp9qRFtDpOG4tk" -d "host_name=localhost&service_description=tomcatMonitorService2&check_command=check_xi_java_as\!-s service:jmx:rmi:///jndi/rmi://localhost:9091/jmxrmi -u 'tomcat' -p 'helper123' -t tomcat -C 'MemorySimpleHeap,MemoryEden,MemorySurvivor,MemoryOld,MemoryMetaspace,ProcessCPUUsage,SystemCPUUsage,Uptime,ClassCount,ThreadCount' -w '314572800,,,,34359738368,50,70,10000000000,10000,150' -c '524288000,,,,68719476736,70,90,100000000000,50000,190'\!\!&check_interval=1&retry_interval=1&max_check_attempts=5&check_period=24x7&contacts=nagiosadmin&notification_interval=5&notification_period=24x7&applyconfig=1"